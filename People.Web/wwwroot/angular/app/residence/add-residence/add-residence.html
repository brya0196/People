<form name="form" class="">
    <div class="card">
        <div class="card-header">
            <a href="/Residences" class="btn btn-danger rounded-0">Cancelar</a>
            <button type="button" class="btn btn-outline-success float-right rounded-0" ng-click="vm.save();" ng-disabled="form.$invalid">Aceptar</button>
        </div>

        <div class="card-body">
            <h5 class="text-muted">Información de la Residencia</h5>
            <div class="row">
                <div class="col-4">
                    <label>Provincia</label>
                    <select class="form-control rounded-0" name="province" ng-model="vm.residence.idprovince" ng-change="vm.getCity(vm.residence.idprovince);">
                        <option ng-value="">Seleccione</option>
                        <option ng-repeat="province in vm.provinces" ng-value="province.id">{{province.name}}</option>
                    </select>
                </div>
                <div class="col-4">
                    <label>Ciudad</label>
                    <select class="form-control rounded-0" name="province" ng-model="vm.residence.idcity" ng-disabled="!vm.residence.idprovince">
                        <option ng-value="">Seleccione</option>
                        <option ng-repeat="city in vm.cities" ng-value="city.id">{{city.name}}</option>
                    </select>
                </div>
            </div>

            <h5 class="text-muted mt-4">Informacion de los Residentes</h5>
            <button type="button" class="btn btn-primary rounded-0 mb-2" data-toggle="modal" data-target="#resident-modal" ng-click="vm.clean();">Agregar Residente</button>
            <div class="row">
                <resident-list class="col-12" data-id="resident-modal" residents="vm.residents" ondelete="vm.deleteResident(id);" onupdate="vm.updateResident(id);"></resident-list>
            </div>


            <h5 class="text-muted mt-4">Informacion de los Servicios</h5>
            <button type="button" class="btn btn-primary rounded-0 mb-2" data-toggle="modal" data-target="#service-modal" ng-click="vm.clean();">Agregar Servicio</button>
            <div class="row">
                <service-list class="col-12" data-id="service-modal" services="vm.services" ondelete="vm.deleteService(id)" onupdate="vm.updateService(id);"></service-list>
            </div>
        </div>
    </div>
</form>



<div class="modal fade" id="resident-modal" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form name="residentForm" class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title h4">Residente</h5>
            </div>
            <div class="modal-body">
                <resident-form resident="vm.resident" form="residentForm"></resident-form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success rounded-0" ng-disabled="residentForm.$invalid" ng-click="vm.saveResident();" data-target="#resident-modal" data-toggle="modal" data-dismiss="modal">Aceptar</button>
            </div>
        </form>
    </div>
</div>

<div class="modal fade" id="service-modal" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form name="serviceForm" class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title h4">Residente</h5>
            </div>
            <div class="modal-body">
                <service-form service="vm.service" form="serviceForm"></service-form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success rounded-0" ng-disabled="serviceForm.$invalid" ng-click="vm.saveService();" data-target="#service-modal" data-toggle="modal" data-dismiss="modal">Aceptar</button>
            </div>
        </form>
    </div>
</div>